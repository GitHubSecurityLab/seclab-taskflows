# SPDX-FileCopyrightText: GitHub, Inc.
# SPDX-License-Identifier: MIT

seclab-taskflow-agent:
  filetype: taskflow
  version: "1.0"

model_config: seclab_taskflows.configs.model_config

globals:
  repo:

# Example taskflow to fetch and review security advisories for a repository
taskflow:
  - task:
      must_complete: true
      exclude_from_context: false
      agents:
        - seclab_taskflow_agent.personalities.assistant
      model: general_tasks
      user_prompt: |
        Fetch all GitHub Security Advisories (GHSAs) for the repo {{ globals.repo }}.

        After fetching, store the list of advisories in memcache under the key 'security_advisories_{{ globals.repo }}'.

        Provide a summary of:
        1. How many advisories were found
        2. The severity levels of the advisories
        3. Key recommendations for addressing them
      toolboxes:
        - seclab_taskflows.toolboxes.ghsa
        - seclab_taskflow_agent.toolboxes.memcache
        - seclab_taskflows.toolboxes.local_file_viewer
        - seclab_taskflows.toolboxes.gh_file_viewer
